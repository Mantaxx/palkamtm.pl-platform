(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{1132:(e,a,s)=>{Promise.resolve().then(s.bind(s,2924)),Promise.resolve().then(s.bind(s,4611))},4611:(e,a,s)=>{"use strict";s.d(a,{default:()=>w});var r=s(1975),n=s(1983),l=s(5849),t=s(2043),i=s(1450),o=s(5155),c=s(1152),d=s(5947),u=s(2108),x=s(4033),m=s(6651),g=s(1873),p=s(3581),h=s(1761),b=s(1169),y=s(9347),f=s(2115),j=[{value:"",label:"Wszystkie kategorie"},{value:"Champions",label:"Championy"},{value:"Young Birds",label:"Młode gołębie"},{value:"Supplements",label:"Suplementy"},{value:"Accessories",label:"Akcesoria"}],v=[{value:"",label:"Wszystkie linie krwi"},{value:"Janssen",label:"Janssen"},{value:"Sion",label:"Sion"},{value:"Bricoux",label:"Bricoux"},{value:"Van Loon",label:"Van Loon"}],N=[{value:"endTime",label:"Czas zakończenia"},{value:"currentPrice",label:"Cena"},{value:"bids",label:"Liczba ofert"},{value:"views",label:"Popularność"},{value:"createdAt",label:"Data dodania"}];function w(){var e=(0,t._)((0,f.useState)({query:"",category:"",bloodline:"",priceMin:0,priceMax:1e5,ageMin:0,ageMax:10,sex:"",location:"",sellerRating:0,sortBy:"endTime",sortOrder:"asc"}),2),a=e[0],s=e[1],w=(0,t._)((0,f.useState)([]),2),k=w[0],z=w[1],M=(0,t._)((0,f.useState)(!1),2),C=M[0],S=M[1],P=(0,t._)((0,f.useState)(!1),2),W=P[0],_=P[1],A=(0,t._)((0,f.useState)(!1),2),B=A[0],O=A[1],q=function(e,a){s(function(s){return(0,l._)((0,n._)({},s),{[e]:a})})},E=(0,f.useCallback)(function(){return(0,r._)(function(){var e,s;return(0,i.YH)(this,function(r){switch(r.label){case 0:_(!0),r.label=1;case 1:return r.trys.push([1,6,7,8]),e=new URLSearchParams,a.query&&e.append("search",a.query),a.category&&e.append("category",a.category),a.bloodline&&e.append("bloodline",a.bloodline),a.priceMin&&e.append("minPrice",a.priceMin.toString()),a.priceMax&&e.append("maxPrice",a.priceMax.toString()),a.location&&e.append("location",a.location),a.sortBy&&e.append("sortBy",a.sortBy),a.sortOrder&&e.append("sortOrder",a.sortOrder),[4,fetch("/api/auctions?".concat(e.toString()))];case 2:if(!(s=r.sent()).ok)return[3,4];return[4,s.json()];case 3:return z(r.sent().auctions.map(function(e){var a,s,r,n,l,t;return{id:e.id,title:e.title,description:e.description,currentPrice:e.currentPrice,startingPrice:e.startingPrice,buyNowPrice:e.buyNowPrice,endTime:new Date(e.endTime),status:e.status.toLowerCase(),category:e.category,bloodline:(null==(a=e.pigeon)?void 0:a.bloodline)||"",age:(null==(s=e.pigeon)?void 0:s.age)||0,sex:(null==(r=e.pigeon)?void 0:r.gender)||"male",location:"",seller:{id:e.seller.id,name:"".concat(e.seller.firstName||""," ").concat(e.seller.lastName||"").trim()||e.seller.id,rating:0,salesCount:0},images:(null==(n=e.assets)?void 0:n.filter(function(e){return"IMAGE"===e.type}).map(function(e){return e.url}))||[],bids:(null==(l=e._count)?void 0:l.bids)||0,watchers:(null==(t=e._count)?void 0:t.watchlist)||0,views:0}})),[3,5];case 4:console.error("Error fetching search results"),z([]),r.label=5;case 5:return[3,8];case 6:return console.error("Error during search:",r.sent()),z([]),[3,8];case 7:return _(!1),[7];case 8:return[2]}})})()},[a]),L=function(e){switch(e){case"active":return"bg-green-100 text-green-800";case"ending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},R=function(e){switch(e){case"active":return"Aktywna";case"ending":return"Kończy się";case"ended":return"Zakończona";default:return e}};return(0,f.useEffect)(function(){O(!0)},[]),(0,f.useEffect)(function(){E()},[a,E]),(0,o.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Wyszukiwanie aukcji"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Znajdź idealnego gołębia pocztowego lub akcesoria"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,o.jsx)("div",{className:"lg:col-span-1",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtry"}),(0,o.jsx)("button",{onClick:function(){return S(!C)},className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors",children:C?(0,o.jsx)(u.A,{className:"w-5 h-5"}):(0,o.jsx)(x.A,{className:"w-5 h-5"})})]}),(0,o.jsx)(c.N,{children:(C||B&&window.innerWidth>=1024)&&(0,o.jsxs)(d.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Szukaj"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,o.jsx)("input",{type:"text",value:a.query,onChange:function(e){return q("query",e.target.value)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Nazwa, opis..."})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategoria"}),(0,o.jsx)("select",{value:a.category,onChange:function(e){return q("category",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500","aria-label":"Wybierz kategorię",title:"Wybierz kategorię",children:j.map(function(e){return(0,o.jsx)("option",{value:e.value,children:e.label},e.value)})})]}),"Pigeon"===a.category&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Linia krwi"}),(0,o.jsx)("select",{value:a.bloodline,onChange:function(e){return q("bloodline",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500","aria-label":"Wybierz linię krwi",title:"Wybierz linię krwi",children:v.map(function(e){return(0,o.jsx)("option",{value:e.value,children:e.label},e.value)})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cena (zł)"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsx)("input",{type:"number",value:a.priceMin,onChange:function(e){return q("priceMin",parseInt(e.target.value)||0)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Min"}),(0,o.jsx)("input",{type:"number",value:a.priceMax,onChange:function(e){return q("priceMax",parseInt(e.target.value)||1e5)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Max"})]})]}),"Pigeon"===a.category&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wiek (lata)"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsx)("input",{type:"number",value:a.ageMin,onChange:function(e){return q("ageMin",parseInt(e.target.value)||0)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Min"}),(0,o.jsx)("input",{type:"number",value:a.ageMax,onChange:function(e){return q("ageMax",parseInt(e.target.value)||10)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Max"})]})]}),"Pigeon"===a.category&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Płeć"}),(0,o.jsxs)("select",{value:a.sex,onChange:function(e){return q("sex",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500","aria-label":"Wybierz płeć",title:"Wybierz płeć",children:[(0,o.jsx)("option",{value:"",children:"Wszystkie"}),(0,o.jsx)("option",{value:"male",children:"Samiec"}),(0,o.jsx)("option",{value:"female",children:"Samica"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lokalizacja"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,o.jsx)("input",{type:"text",value:a.location,onChange:function(e){return q("location",e.target.value)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Miasto, region..."})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min. ocena sprzedawcy"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("input",{type:"range",min:"0",max:"5",step:"0.1",value:a.sellerRating,onChange:function(e){return q("sellerRating",parseFloat(e.target.value))},className:"flex-1","aria-label":"Minimalna ocena sprzedawcy",title:"Minimalna ocena sprzedawcy"}),(0,o.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[a.sellerRating.toFixed(1),"★"]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sortuj według"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("select",{value:a.sortBy,onChange:function(e){return q("sortBy",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500","aria-label":"Wybierz kryterium sortowania",title:"Wybierz kryterium sortowania",children:N.map(function(e){return(0,o.jsx)("option",{value:e.value,children:e.label},e.value)})}),(0,o.jsxs)("select",{value:a.sortOrder,onChange:function(e){return q("sortOrder",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500","aria-label":"Wybierz kolejność sortowania",title:"Wybierz kolejność sortowania",children:[(0,o.jsx)("option",{value:"asc",children:"Rosnąco"}),(0,o.jsx)("option",{value:"desc",children:"Malejąco"})]})]})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:function(){s({query:"",category:"",bloodline:"",priceMin:0,priceMax:1e5,ageMin:0,ageMax:10,sex:"",location:"",sellerRating:0,sortBy:"endTime",sortOrder:"asc"})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Wyczyść"}),(0,o.jsx)("button",{onClick:E,disabled:W,className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-md hover:bg-slate-700 disabled:opacity-50 transition-colors",children:W?"Szukam...":"Szukaj"})]})]})})]})}),(0,o.jsxs)("div",{className:"lg:col-span-3",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Znaleziono ",k.length," wynik\xf3w"]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:a.query&&'dla zapytania "'.concat(a.query,'"')})]}),(0,o.jsxs)("button",{onClick:function(){return S(!C)},className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:[(0,o.jsx)(p.A,{className:"w-4 h-4"}),"Filtry"]})]}),W?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-600 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Wyszukuję..."})]}):(0,o.jsxs)("div",{className:"space-y-6",children:[k.map(function(e){return(0,o.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,o.jsxs)("div",{className:"flex gap-6",children:[(0,o.jsx)("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex-shrink-0"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.title}),(0,o.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(L(e.status)),children:R(e.status)})]}),(0,o.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,o.jsx)(h.A,{className:"w-4 h-4"}),(0,o.jsxs)("span",{children:[e.currentPrice.toLocaleString()," zł"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,o.jsx)(b.A,{className:"w-4 h-4"}),(0,o.jsxs)("span",{children:[e.bids," ofert"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,o.jsx)(g.A,{className:"w-4 h-4"}),(0,o.jsx)("span",{children:e.location})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,o.jsx)(y.A,{className:"w-4 h-4"}),(0,o.jsxs)("span",{children:[e.seller.rating," (",e.seller.salesCount,")"]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"text-sm text-gray-500",children:["Sprzedawca: ",e.seller.name]}),(0,o.jsx)("button",{className:"px-6 py-2 bg-slate-600 text-white rounded-md hover:bg-slate-700 transition-colors",children:"Zobacz szczeg\xf3ły"})]})]})]})},e.id)}),0===k.length&&(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)(m.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Brak wynik\xf3w"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Spr\xf3buj zmienić kryteria wyszukiwania"})]})]})]})]})]})})}}},e=>{e.O(0,[3965,9042,2190,1846,2924,8441,9342,1255,7358],()=>e(e.s=1132)),_N_E=e.O()}]);