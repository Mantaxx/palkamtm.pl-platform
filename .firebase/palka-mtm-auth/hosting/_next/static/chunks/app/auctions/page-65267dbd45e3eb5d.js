(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5017],{5051:(e,t,a)=>{Promise.resolve().then(a.bind(a,7948)),Promise.resolve().then(a.bind(a,2924))},6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var s=(0,a(5105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6926:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var s=(0,a(5105).A)("Gavel",[["path",{d:"m14 13-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10",key:"c9cbz0"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]])},7948:(e,t,a)=>{"use strict";a.d(t,{AuctionsPage:()=>C});var s=a(1975),n=a(1983),i=a(5849),r=a(2043),l=a(1450),c=a(5155),o=a(5194),d=a(7590),u=a(9591),m=a(4837),x=a(5927),h=a(3796),p=a(5947),f=a(1152),g=a(6191),j=a(6651),b=a(6485),v=a(6926),w=a(5239),y=a(2619),N=a.n(y),k=a(63),z=a(2115);function C(){var e=(0,x.A)().user,t=(0,k.useRouter)(),a=(0,h.CU)(),y=a.setAuctions,C=a.setSearchTerm,E=a.setLoading,D=a.setError,P=a.searchTerm,A=(0,h.t2)(),_=(0,h.M3)(),I=(0,h.qz)(),L=(0,r._)((0,z.useState)("all"),2),S=L[0],T=L[1],M=(0,r._)((0,z.useState)(!1),2),B=M[0],O=M[1],G=(0,r._)((0,z.useState)(Date.now()),2),R=G[0],V=G[1],X=(0,r._)((0,z.useState)(!1),2),U=X[0],Y=X[1],F=(0,r._)((0,z.useState)([]),2),H=F[0],W=F[1],Z=(0,r._)((0,z.useState)(0),2),q=Z[0],K=Z[1],J=(0,r._)((0,z.useState)(""),2),Q=J[0],$=J[1];(0,z.useEffect)(function(){(0,s._)(function(){var e;return(0,l.YH)(this,function(t){switch(t.label){case 0:E(!0),t.label=1;case 1:return t.trys.push([1,6,7,8]),[4,fetch("/api/auctions")];case 2:if(!(e=t.sent()).ok)return[3,4];return[4,e.json()];case 3:return y((t.sent().auctions||[]).map(function(e){var t,a;return(0,i._)((0,n._)({},e),{images:(null==(t=e.assets)?void 0:t.filter(function(e){return"IMAGE"===e.type}).map(function(e){return e.url}))||[],documents:(null==(a=e.assets)?void 0:a.filter(function(e){return"DOCUMENT"===e.type}).map(function(e){return e.url}))||[]})})),[3,5];case 4:D("Błąd podczas ładowania aukcji"),t.label=5;case 5:return[3,8];case 6:return t.sent(),D("Błąd podczas ładowania aukcji"),[3,8];case 7:return E(!1),[7];case 8:return[2]}})})()},[y,E,D]),(0,z.useEffect)(function(){var e=setInterval(function(){return V(Date.now())},1e3);return function(){return clearInterval(e)}},[]);var ee=function(e){var t=new Date(e).getTime()-R;if(t<=0)return"Zakończona";var a=Math.floor(t/864e5),s=Math.floor(t%864e5/36e5),n=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3);return a>0?"".concat(a,"d ").concat(s,"h ").concat(n,"m"):s>0?"".concat(s,"h ").concat(n,"m"):"".concat(n,"m ").concat(i,"s")},et=function(e){var t=new Date(e).getTime()-R;return t>0&&t<=36e5},ea=function(e){e.images&&e.images.length>0&&(W(e.images),K(0),$(e.title),Y(!0))},es=function(e){var t=A.find(function(t){return t.id===e});if(t&&t.buyNowPrice){var a={type:"buy_now",auctionId:t.id,auctionTitle:t.title,price:t.buyNowPrice,seller:{name:t.sellerId,id:t.sellerId,rating:0,salesCount:0,avatar:null,location:"Brak lokalizacji",phone:"Brak numeru telefonu",email:"Brak email"},timestamp:new Date().toISOString()};localStorage.setItem("auctionSuccess",JSON.stringify(a)),window.location.href="/auctions/success"}},en=A.filter(function(e){return"all"===S||e.status===S});return _?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,c.jsxs)(m.X,{variant:"glass",className:"p-8 text-center",children:[(0,c.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,c.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Ładowanie aukcji..."}),(0,c.jsx)("p",{className:"text-white/70",children:"Przygotowujemy najlepsze oferty dla Ciebie"})]})}):I?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,c.jsxs)(m.X,{variant:"glass",className:"p-8 text-center border-2 border-white shadow-xl",children:[(0,c.jsx)("p",{className:"text-lg mb-4 text-red-400",children:I}),(0,c.jsx)(u.R,{variant:"primary",onClick:function(){return window.location.reload()},intensity:"high",children:"Spr\xf3buj ponownie"})]})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"pt-8 pb-20 px-4 sm:px-6 lg:px-8",children:[(0,c.jsxs)("div",{className:"w-full mx-auto text-center mb-12",children:[(0,c.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Aukcje Gołębi"}),(0,c.jsx)("p",{className:"text-lg md:text-xl text-white/90 mb-8 max-w-3xl mx-auto",children:"Licytuj ekskluzywne gołębie pocztowe z rodowodami champion\xf3w"}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("button",{onClick:function(){e?O(!0):t.push("/auth/signin")},className:"bg-white/10 backdrop-blur-md rounded-2xl px-12 py-6 text-2xl font-bold text-white border border-white/20 hover:bg-white/20 hover:shadow-xl transition-all duration-300 flex items-center justify-center mx-auto",children:[(0,c.jsx)(g.A,{className:"w-10 h-10 mr-4"}),"Dodaj aukcję"]}),e&&(0,c.jsxs)("div",{className:"text-center text-sm text-white/60 mt-2",children:["Debug: Przycisk widoczny dla użytkownika ",e.email]})]})]}),(0,c.jsx)("div",{className:"relative z-10 px-2 sm:px-4 lg:px-6 xl:px-8 2xl:px-12",children:(0,c.jsxs)("div",{className:"w-full",children:[(0,c.jsx)(p.P.section,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-12",children:(0,c.jsx)(m.X,{variant:"glass",className:"p-6 border-2 border-white shadow-xl",children:(0,c.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[(0,c.jsxs)("div",{className:"relative flex-1 max-w-md group",children:[(0,c.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5 z-10"}),(0,c.jsx)("input",{type:"text",placeholder:"","aria-label":"Szukaj gołębi",value:P,onChange:function(e){return C(e.target.value)},className:"w-full pl-10 pr-4 py-3 solid-morphism rounded-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 border-2 border-white bg-white/90"})]}),(0,c.jsx)("div",{className:"flex gap-2",children:["all","ACTIVE","PENDING","CANCELLED","ENDED"].map(function(e){return(0,c.jsx)("div",{children:(0,c.jsxs)("button",{onClick:function(){return T(e)},className:"px-4 py-2 rounded-xl transition-all duration-300 ".concat(S===e?"bg-gradient-to-r from-blue-600/80 to-blue-800/80 text-white":"glass-morphism text-white/70 hover:glass-morphism-strong hover:text-white"," relative overflow-hidden"),children:["all"===e&&"Wszystkie","ACTIVE"===e&&"Aktywne","PENDING"===e&&"Oczekujące","CANCELLED"===e&&"Anulowane","ENDED"===e&&"Zakończone"]})},e)})}),(0,c.jsxs)("button",{onClick:function(){e?O(!0):t.push("/auth/signin")},className:"flex items-center gap-2 btn-primary","aria-label":"Dodaj nową aukcję",children:[(0,c.jsx)(g.A,{className:"w-5 h-5"}),(0,c.jsx)("span",{children:"Dodaj aukcję"})]})]})})}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:en.length>0?en.map(function(e,a){var s;return(0,c.jsx)(p.P.div,{initial:{opacity:0,y:50,rotateY:-10},whileInView:{opacity:1,y:0,rotateY:0},transition:{duration:.8,delay:.05*a,type:"spring"},viewport:{once:!0,margin:"-100px"},className:"group",children:(0,c.jsx)(N(),{href:"/auctions/".concat(e.id),className:"block h-full",children:(0,c.jsxs)(m.X,{variant:"glass",glow:!1,className:"overflow-hidden h-full flex flex-col hover:scale-[1.02] transition-transform cursor-pointer",children:[(0,c.jsxs)("div",{className:"relative w-full h-64 bg-gray-100 overflow-hidden rounded-t-lg cursor-pointer group",onClick:function(t){t.preventDefault(),t.stopPropagation(),ea(e)},children:[(null==(s=e.images)?void 0:s[0])?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w.default,{src:e.images[0],alt:e.title,fill:!0,className:"object-cover transition-transform group-hover:scale-105",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",onError:function(){console.error("Auction image failed to load:",e.images[0])}}),(0,c.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:(0,c.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-black/50 rounded-full p-3",children:(0,c.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})]}):(0,c.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCF7"}),(0,c.jsx)("p",{className:"text-sm",children:"Brak zdjęcia"})]})}),(0,c.jsx)("div",{className:"absolute top-4 left-4",children:(0,c.jsxs)("span",{className:"inline-block px-3 py-1.5 rounded-full text-sm font-medium text-white shadow-lg\n                                                        ".concat("ACTIVE"===e.status?"bg-emerald-600":"","\n                                                        ").concat("PENDING"===e.status?"bg-amber-600":"","\n                                                        ").concat("CANCELLED"===e.status?"bg-gray-500":"","\n                                                        ").concat("ENDED"===e.status?"bg-rose-600":"","\n                                                    "),children:["ACTIVE"===e.status&&"Aktywna","PENDING"===e.status&&"Oczekuje","CANCELLED"===e.status&&"Anulowana","ENDED"===e.status&&"Zakończona"]})})]}),(0,c.jsxs)("div",{className:"p-6 flex flex-col grow",children:[(0,c.jsx)("h3",{className:"text-lg font-bold text-white line-clamp-2 mb-4",children:e.title}),(0,c.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("span",{className:"text-sm text-white/70",children:"Aktualna cena:"}),(0,c.jsx)("span",{className:"text-xl font-bold text-white",children:"".concat(Math.round(e.currentPrice/h.CU.getState().ratePLNperEUR)," EUR")})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("span",{className:"text-sm text-white/70",children:"Czas do końca:"}),(0,c.jsxs)("span",{className:"text-sm font-semibold flex items-center gap-2 ".concat(et(e.endTime)?"text-red-400":"text-white"),children:[(0,c.jsx)(b.A,{className:"w-4 h-4 ".concat(et(e.endTime)?"text-red-400":"text-white/70")}),ee(e.endTime)]})]})]})]}),(0,c.jsx)("div",{className:"p-6 pt-0",onClick:function(e){return e.stopPropagation()},children:"ENDED"===e.status?(0,c.jsx)("div",{className:"text-center text-white/70 py-4",children:"Aukcja zakończona"}):(0,c.jsx)("div",{className:"space-y-3",children:e.startingPrice>0&&e.buyNowPrice?(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("button",{onClick:function(a){a.stopPropagation(),t.push("/auctions/".concat(e.id))},className:"inline-flex items-center justify-center flex-1 h-10 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors",children:"Licytuj"}),(0,c.jsx)("button",{onClick:function(t){t.stopPropagation(),es(e.id)},className:"inline-flex items-center justify-center flex-1 h-10 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700 transition-colors",children:"Kup teraz"})]}):e.startingPrice>0?(0,c.jsx)("button",{onClick:function(a){a.stopPropagation(),t.push("/auctions/".concat(e.id))},className:"inline-flex items-center justify-center w-full h-10 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition-colors",children:"Licytuj"}):e.buyNowPrice?(0,c.jsx)("button",{onClick:function(t){t.stopPropagation(),es(e.id)},className:"inline-flex items-center justify-center w-full h-10 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700 transition-colors",children:"Kup teraz"}):null})})]})})},e.id)}):(0,c.jsx)("div",{className:"col-span-3 py-12",children:(0,c.jsxs)(m.X,{variant:"glass",className:"p-12 text-center",children:[(0,c.jsx)(v.A,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),(0,c.jsx)("h3",{className:"text-2xl font-semibold mb-2",children:"Brak aukcji"}),(0,c.jsx)("p",{className:"text-white/70 mb-6",children:"Nie znaleziono aukcji spełniających kryteria wyszukiwania."}),(0,c.jsx)(u.R,{variant:"secondary",onClick:function(){C(""),T("all")},children:"Wyczyść filtry"})]})})})]})})]}),(0,c.jsx)(f.N,{children:B&&(0,c.jsx)(p.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-transparent backdrop-blur-sm z-[99999] flex items-center justify-center p-4",children:(0,c.jsx)(p.P.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"w-full max-w-7xl h-[95vh] overflow-hidden",onClick:function(e){return e.stopPropagation()},children:(0,c.jsx)("div",{className:"relative h-full overflow-auto",children:(0,c.jsx)(o.default,{onSuccess:function(){return O(!1)},onCancel:function(){return O(!1)}})})})})}),(0,c.jsx)(d.s,{isOpen:U,onClose:function(){return Y(!1)},images:H,currentIndex:q,title:Q})]})}},9591:(e,t,a)=>{"use strict";a.d(t,{R:()=>o});var s=a(1983),n=a(5849),i=a(5155),r=a(5947),l=a(2619),c=a.n(l),o=(0,a(2115).memo)(function(e){var t=e.children,a=e.onClick,l=e.href,o=e.type,d=e.variant,u=e.size,m=e.className,x=e.disabled,h=void 0!==x&&x,p=e.title,f=e.ariaLabel,g=e.glow,j=e.intensity,b={low:{scale:1.02,y:-2},medium:{scale:1.05,y:-4},high:{scale:1.08,y:-6}}[void 0===j?"medium":j],v="\n    ".concat({primary:"btn-primary",secondary:"btn-secondary",outline:"btn-outline",ghost:"btn-ghost",glass:"glass-morphism hover:glass-morphism-strong"}[void 0===d?"primary":d],"\n    ").concat({sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-6 py-4 text-lg"}[void 0===u?"md":u],"\n    ").concat(void 0===g||g?"animate-glow3D":"","\n    ").concat(h?"opacity-50 cursor-not-allowed":"hover-3d-lift","\n    transform-3d perspective-1000\n    ").concat(void 0===m?"":m,"\n  "),w={whileHover:h?{}:{scale:b.scale,y:b.y,rotateX:5,rotateY:5},whileTap:h?{}:{scale:.98,y:0},transition:{type:"spring",stiffness:300,damping:20}};return l?(0,i.jsx)(r.P.div,(0,n._)((0,s._)({},w),{children:(0,i.jsx)(c(),{href:l,title:p,"aria-label":f,className:v,children:(0,i.jsx)("span",{className:"relative z-10",children:t})})})):(0,i.jsx)(r.P.button,(0,n._)((0,s._)({type:void 0===o?"button":o,onClick:a,disabled:h,title:p,"aria-label":f,className:v},w),{children:(0,i.jsx)("span",{className:"relative z-10",children:t})}))})}},e=>{e.O(0,[3965,9042,2190,7410,8423,7227,2924,5194,9949,8441,9342,1255,7358],()=>e(e.s=5051)),_N_E=e.O()}]);