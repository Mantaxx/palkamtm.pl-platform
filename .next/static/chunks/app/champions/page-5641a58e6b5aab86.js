(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6173],{2468:(e,o,t)=>{"use strict";t.d(o,{A:()=>d});var l=t(5155),a=t(5947),i=t(7650),s=t(1629),n=t(4904),r=t(5229),c=t(2115);function d(e){let{image:o,onClose:t,onPrevious:d,onNext:h,hasPrevious:m,hasNext:g,currentIndex:u,totalImages:p}=e,[x,b]=(0,c.useState)(1),[f,w]=(0,c.useState)({x:0,y:0}),[y,v]=(0,c.useState)(!1),[j,k]=(0,c.useState)({x:0,y:0}),[N,C]=(0,c.useState)(!1);(0,c.useEffect)(()=>{C(!0);let e=window.scrollY;document.body.style.position="fixed",document.body.style.top="-".concat(e,"px"),document.body.style.width="100%",document.body.style.overflow="hidden";let o=e=>{"Escape"===e.key&&(console.log("ESC key pressed"),t())};return window.addEventListener("keydown",o),()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,e),window.removeEventListener("keydown",o)}},[t]),(0,c.useEffect)(()=>{let e=e=>{"ArrowLeft"===e.key&&d&&m?d():"ArrowRight"===e.key&&h&&g&&h()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d,h,m,g]);let P=()=>{b(e=>Math.min(e+.5,3))},I=()=>{b(e=>Math.max(e-.5,.5))},z=()=>{v(!1)};return N?i.createPortal((0,l.jsx)(a.P.div,{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/95 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>{e.target===e.currentTarget&&t()},children:(0,l.jsxs)(a.P.div,{className:"relative w-full h-full max-w-none max-h-none overflow-hidden",initial:{scale:.9},animate:{scale:1},exit:{scale:.9},children:[(0,l.jsxs)("div",{className:"absolute top-4 left-4 flex items-center space-x-2 z-10",children:[(0,l.jsx)("button",{onClick:I,disabled:x<=.5,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Oddal",children:(0,l.jsx)(s.A,{size:20})}),(0,l.jsxs)("button",{onClick:()=>{b(1),w({x:0,y:0})},className:"px-3 py-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors text-sm","aria-label":"Resetuj zoom",children:[Math.round(100*x),"%"]}),(0,l.jsx)("button",{onClick:P,disabled:x>=3,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Przybliż",children:(0,l.jsx)(n.A,{size:20})})]}),void 0!==u&&p&&p>1&&(0,l.jsxs)("div",{className:"absolute top-4 right-20 px-4 py-2 rounded-full bg-black/50 text-white text-sm font-medium z-10",children:[u+1," / ",p]}),(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),console.log("Close button clicked"),t()},className:"absolute top-4 right-4 p-2 rounded-full bg-black/70 text-white hover:bg-black/90 transition-colors z-[100] cursor-pointer","aria-label":"Zamknij",children:(0,l.jsx)(r.A,{size:24})}),d&&m&&(0,l.jsx)("div",{className:"absolute left-0 top-0 w-20 h-full flex items-center justify-center opacity-80 hover:opacity-100 transition-opacity duration-300 z-40 group",children:(0,l.jsx)("button",{onClick:d,className:"p-4 rounded-full bg-black/80 text-white hover:bg-black/90 transition-all duration-200 hover:scale-110 shadow-lg","aria-label":"Poprzednie zdjęcie",children:(0,l.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),h&&g&&(0,l.jsx)("div",{className:"absolute right-0 top-0 w-20 h-full flex items-center justify-center opacity-80 hover:opacity-100 transition-opacity duration-300 z-40 group",children:(0,l.jsx)("button",{onClick:h,className:"p-4 rounded-full bg-black/80 text-white hover:bg-black/90 transition-all duration-200 hover:scale-110 shadow-lg","aria-label":"Następne zdjęcie",children:(0,l.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}),(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center cursor-grab active:cursor-grabbing bg-black touch-none",onMouseDown:e=>{x>1&&(v(!0),k({x:e.clientX-f.x,y:e.clientY-f.y}))},onMouseMove:e=>{y&&x>1&&w({x:e.clientX-j.x,y:e.clientY-j.y})},onMouseUp:z,onMouseLeave:z,onWheel:e=>{e.cancelable&&(e.preventDefault(),e.stopPropagation()),e.deltaY<0?P():I()},children:(0,l.jsx)(a.P.img,{src:o.src,alt:o.alt,className:"max-w-full max-h-full object-contain",animate:{scale:x,x:f.x/x,y:f.y/x},transition:{type:"spring",stiffness:300,damping:30},drag:y,dragConstraints:{left:0,right:0,top:0,bottom:0},onDrag:(e,o)=>{x>1&&w({x:f.x+o.delta.x,y:f.y+o.delta.y})}})})]})}),document.body):null}},2993:(e,o,t)=>{Promise.resolve().then(t.bind(t,5084)),Promise.resolve().then(t.bind(t,5363))},5084:(e,o,t)=>{"use strict";t.d(o,{SimpleChampionsList:()=>m});var l=t(5155),a=t(2468),i=t(2115),s=t(7125),n=t(1152),r=t(5947),c=t(368),d=t(7937);function h(e){let{champions:o,onImageClick:t,onPedigreeClick:a}=e,[h,m]=(0,i.useState)(0),g=o.flatMap((e,o)=>e.images.map((t,l)=>({championId:e.id,imageSrc:t,championIndex:o,imageIndex:l})));console.log("ChampionsCarousel - Total champions:",o.length),console.log("ChampionsCarousel - Total images:",g.length),console.log("ChampionsCarousel - Champions data:",o.map(e=>({id:e.id,imagesCount:e.images.length})));let u=e=>{m(e)};if(0===g.length)return(0,l.jsx)("div",{className:"text-center py-12",children:(0,l.jsx)("p",{className:"text-white",children:"Brak zdjęć champion\xf3w do wyświetlenia."})});let p=(()=>{let e=[],t=g.length;if(0===t)return e;for(let l=-2;l<=2;l++){let a=(h+l+t)%t,i=g[a],s=o[i.championIndex];e.push({imageData:i,champion:s,position:l,index:a,championIndex:i.championIndex})}return e})();return console.log("Visible images count:",p.length),console.log("Visible images positions:",p.map(e=>({position:e.position,championId:e.champion.id}))),(0,l.jsxs)("div",{className:"relative w-full max-w-7xl mx-auto px-4",children:[(0,l.jsxs)("div",{className:"relative h-[550px] sm:h-[650px] overflow-hidden",children:[(0,l.jsx)(n.N,{children:p.map(e=>{let{imageData:o,champion:a,position:i,index:n}=e;return(0,l.jsx)(r.P.div,{className:"absolute inset-0 flex items-start justify-center pt-8 ".concat(0===i?"z-30":-1===i||1===i?"z-20":"z-10"),initial:{x:25*i+"%",scale:0===i?1:-1===i||1===i?.85:.7,opacity:0===i?1:-1===i||1===i?.8:.5},animate:{x:25*i+"%",scale:0===i?1:-1===i||1===i?.85:.7,opacity:0===i?1:-1===i||1===i?.8:.5},exit:{x:-2===i?"-200%":-1===i?"-100%":1===i?"100%":2===i?"200%":"0%",scale:.7,opacity:0},transition:{type:"tween",duration:1.2,ease:"easeInOut"},children:(0,l.jsx)(r.P.div,{className:"relative bg-white/10 backdrop-blur-sm rounded-2xl border-2 border-white overflow-hidden shadow-2xl cursor-pointer ".concat(0===i?"w-[700px] h-[500px]":-1===i||1===i?"w-[560px] h-[400px]":"w-[420px] h-[300px]"),whileHover:{scale:0===i?1.05:-1===i||1===i?.9:.8,boxShadow:"0 0 40px rgba(255, 255, 255, 0.8)",filter:"none",transition:{duration:.8}},onClick:()=>{0===i?t(o.imageSrc,n):0!==i&&u(n)},children:(0,l.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,l.jsx)(s.pH,{src:o.imageSrc,alt:"Champion ".concat(a.id," - Zdjęcie ").concat(o.imageIndex+1),width:0,height:0,fitMode:"contain",aspectRatio:"auto",className:"w-full h-full object-contain transition-all duration-500 ".concat(0===i?"grayscale-0":"grayscale"),sizes:"100vw"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]})})},"".concat(o.championId,"-").concat(o.imageIndex,"-").concat(n))})}),g.length>1&&(0,l.jsx)("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2",children:g.map((e,o)=>(0,l.jsx)("button",{onClick:()=>u(o),className:"w-2 h-2 rounded-full transition-all duration-300 ".concat(o===h?"bg-white scale-125":"bg-white/50 hover:bg-white/70"),"aria-label":"Przejdź do zdjęcia ".concat(o+1)},o))}),(0,l.jsx)("div",{className:"absolute bottom-12 left-1/2 transform -translate-x-1/2 z-50",children:(0,l.jsx)("button",{onClick:()=>{let e=p.find(e=>0===e.position),t=e?o[e.championIndex]:o[0],l=(null==t?void 0:t.pedigreeImage)||"/champions/1/pedigree/DV-02906-11-98.1.jpg";console.log("PRZYCISK KLIKNIĘTY!"),console.log("Current champion:",null==t?void 0:t.id),console.log("Pedigree:",l),a(l)},className:"bg-red-500 text-white px-4 py-2 rounded text-lg font-bold hover:bg-red-600 transition-colors",children:"RODOW\xd3D"})})]}),g.length>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>{m(e=>(e-1+g.length)%g.length)},className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-30 p-2 sm:p-3 rounded-full bg-black/50 hover:bg-black/70 text-white transition-all duration-300 hover:scale-110","aria-label":"Poprzedni champion",children:(0,l.jsx)(c.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,l.jsx)("button",{onClick:()=>{m(e=>(e+1)%g.length)},className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-30 p-2 sm:p-3 rounded-full bg-black/50 hover:bg-black/70 text-white transition-all duration-300 hover:scale-110","aria-label":"Następny champion",children:(0,l.jsx)(d.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]})}function m(){let[e,o]=(0,i.useState)(null),[t,s]=(0,i.useState)([]),[n,r]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),[m,g]=(0,i.useState)([]),[u,p]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{d(!0),console.log("Fetching champions from API...");let e=await fetch("/api/champions/images");if(console.log("API response status:",e.status),console.log("API response ok:",e.ok),!e.ok)throw Error("Nie udało się pobrać danych champion\xf3w");let o=await e.json();console.log("API response data:",o);let t=o.champions||[];console.log("Champions data from API:",t);let l=t.map(e=>{var o;let t=Array.isArray(e.images)?e.images:[];console.log("Raw API images for champion",e.id,":",t);let l=t.map(e=>"string"==typeof e?e:"object"==typeof e&&null!==e?String(e.url||""):"").filter(Boolean),a="";return console.log("Champion data pedigree:",e.pedigree),(null==(o=e.pedigree)?void 0:o.images)&&e.pedigree.images.length>0?(a=e.pedigree.images[0],console.log("Using API pedigree image:",a)):(a="/champions/".concat(e.id,"/pedigree/").concat(e.ringNumber||"pedigree",".1.jpg"),console.log("Using fallback pedigree image:",a)),console.log("Processed champion:",e.id,"Gallery length:",l.length,"Gallery:",l),console.log("Pedigree data for champion",e.id,":",e.pedigree),console.log("Final pedigreeImage:",a),{id:String(e.id||""),images:l,pedigreeImage:a}}).filter(e=>e&&e.id);console.log("Processed champions list:",l),console.log("Champions list length:",l.length),s(l),console.log("Loaded champions:",l);let a=l.flatMap(e=>e.images.map(e=>({src:e,alt:"Zdjęcie championa"}))).slice(0,20);g(a)}catch(e){console.error("Błąd podczas ładowania champion\xf3w:",e)}finally{d(!1)}})()},[]);let x=(e,t)=>{o({src:e,alt:"Zdjęcie ".concat(t+1)}),r(t)};return c?(0,l.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"}),(0,l.jsx)("span",{className:"ml-4 text-white",children:"Ładowanie champion\xf3w..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{champions:t,onImageClick:x,onPedigreeClick:e=>{console.log("=== onPedigreeClick CALLED ==="),console.log("Pedigree image received:",e),console.log("Setting selectedPedigreeImage to:",e),p(e),console.log("selectedPedigreeImage set successfully"),console.log("=== END onPedigreeClick ===")}}),e&&null!==n&&(0,l.jsx)(a.A,{image:{id:"champion-image-".concat(n),src:e.src,alt:e.alt},onClose:()=>{o(null),r(null)},onPrevious:n>0?()=>x(m[n-1].src,n-1):void 0,onNext:n<m.length-1?()=>x(m[n+1].src,n+1):void 0,hasPrevious:n>0,hasNext:n<m.length-1,currentIndex:n,totalImages:m.length}),u&&(0,l.jsx)(a.A,{image:{id:"pedigree-image",src:u,alt:"Rodow\xf3d championa"},onClose:()=>{console.log("Closing pedigree modal"),p(null)}}),!1]})}}},e=>{e.O(0,[6635,5481,867,6783,8441,1255,7358],()=>e(e.s=2993)),_N_E=e.O()}]);